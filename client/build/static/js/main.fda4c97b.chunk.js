(this["webpackJsonpaxiom-admin"]=this["webpackJsonpaxiom-admin"]||[]).push([[0],{359:function(e,t,c){},368:function(e,t,c){},371:function(e,t,c){},372:function(e,t,c){},374:function(e,t,c){},375:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c(0),s=c(34),r=c.n(s),i=c(17),o=c(54),j=c(39),l=c(10),u=c(377),d=c(85),b=c(393),m=c(394),O=c(395),h=c(396),x=c(397),f=c(13),p=c(131),g=Object(p.b)({name:"auth",initialState:{user:null},reducers:{setUser:function(e,t){e.user=t.payload}}}),y=g.actions.setUser,I=function(e){return e.auth.user},v=g.reducer,S=function(){var e=Object(o.b)(),t=Object(o.c)(I),c=Object(n.useMemo)((function(){return t||JSON.parse(localStorage.getItem("user"))||{}}),[t]),a=Object(n.useMemo)((function(){return c&&c.role&&"admin"===c.role.name}),[c]),s=Object(n.useCallback)((function(t){var a=Object(f.a)(Object(f.a)({},c),t);e(y(a)),localStorage.setItem("user",JSON.stringify(a))}),[c,e]);return[c,s,a]},N=c(55),w=c(389),k=u.a.Header,C=function(){var e=Object(o.b)(),t=Object(j.f)();return Object(a.jsx)(k,{className:"site-layout-sub-header-background",children:Object(a.jsx)(N.a,{type:"primary",icon:Object(a.jsx)(w.a,{}),onClick:function(){e(y(null)),localStorage.removeItem("user"),localStorage.removeItem("token"),t.push("/")},children:"\u0412\u044b\u0439\u0442\u0438"})})},F=c(383),q=c(107),z=c(204),E=c(205),M=c(388),A=c(380),T=c(77),P=c.n(T),V=c(386),K={1:"orange",2:"geekblue",3:"blue",4:"cyan",5:"green"},Y=function(e){var t=e.id,c=e.name;return Object(a.jsx)(V.a,{color:K[t],children:c})},U=c(387),_=c(177),B=c.n(_).a.create({baseURL:"/api/"});B.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers["x-access-token"]=t),e}),(function(e){return Promise.reject(e)})),B.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&F.a.error({message:e.response.data.message||"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438!"}),Promise.reject(e.response)}));var D=B,H=function(e){var t=e.onSuccess,c=void 0===t?function(){}:t,s=e.url,r=e.successMessage,i=e.errorMessage,o=Object(n.useState)(!1),j=Object(l.a)(o,2),u=j[0],d=j[1],b=Object(n.useState)(!1),m=Object(l.a)(b,2),O=m[0],h=m[1];return Object(a.jsx)(U.a,{title:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?",placement:"topRight",visible:u,onConfirm:function(){h(!0),D.delete(s).then((function(){F.a.success({message:r}),c()})).catch((function(e){F.a.error({message:i}),console.error(e)})).finally((function(){h(!1),d(!1)}))},okText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okButtonProps:{loading:O,danger:!0},onCancel:function(){d(!1)},children:Object(a.jsx)(N.a,{size:"small",danger:!0,onClick:function(){d(!0)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})},J=function(e){var t=e.orders,c=e.loading,s=e.showCustomer,r=void 0===s||s,o=e.fetchOrders,j=[{title:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",dataIndex:"createdAt",render:function(e){return P()(e).format("D MMMM YYYY, HH:mm")}}].concat(Object(E.a)(r?[{title:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a",dataIndex:"customer",render:function(e){return Object(a.jsx)(i.b,{to:"/customers/".concat(e.id),children:e.organizationName})}}]:[]),[{title:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u0430",dataIndex:"products",render:function(e){return e&&!!e.length&&e.map((function(e){return Object(a.jsxs)(n.Fragment,{children:[e.name," (",e.order_product.quantity," \u0448\u0442)",Object(a.jsx)("br",{})]},e.id)}))}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"orderStatus",render:function(e){return Object(a.jsx)(Y,{id:e.id,name:e.name})}},{title:"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439",dataIndex:"user",render:function(e){return e&&"".concat(e.fullName||"",", ").concat(e.username)}},{title:"",key:"action",render:function(e,t){return Object(a.jsxs)(M.b,{size:"middle",children:[Object(a.jsx)(H,{url:"/orders/".concat(t.id),onSuccess:o,successMessage:"\u0417\u0430\u043a\u0430\u0437 \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d",errorMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),Object(a.jsx)(i.b,{to:"/orders/".concat(t.id,"/edit"),children:Object(a.jsx)(N.a,{size:"small",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),Object(a.jsx)(i.b,{to:"/orders/".concat(t.id),children:Object(a.jsx)(N.a,{size:"small",children:"\u0414\u0435\u0442\u0430\u043b\u0438"})})]})}}]);return Object(a.jsx)(A.a,{columns:j,dataSource:t,rowKey:"id",loading:c,pagination:!1})},L=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)([]),o=Object(l.a)(r,2),j=o[0],u=o[1],d=Object(n.useState)({page:1,size:10,filter:{},order:'[["createdAt", "DESC"]]'}),b=Object(l.a)(d,2),m=b[0],O=b[1],h=Object(n.useState)([]),x=Object(l.a)(h,2),p=x[0],g=x[1],y=Object(n.useState)(!1),I=Object(l.a)(y,2),v=I[0],S=I[1],w=Object(n.useState)([]),k=Object(l.a)(w,2),C=k[0],E=k[1],M=Object(n.useState)(!1),A=Object(l.a)(M,2),T=A[0],P=A[1],V=function(e){O((function(t){return Object(f.a)(Object(f.a)({},t),e)}))},K=function(e){O((function(t){return Object(f.a)(Object(f.a)({},t),{},{page:1,size:10,filter:Object(f.a)(Object(f.a)({},t.filter),e)})}))},Y=Object(n.useCallback)((function(){s(!0),D.get("/orders",{params:m}).then((function(e){u(e.data)})).catch((function(){})).finally((function(){s(!1)}))}),[s,u,m]);return Object(n.useEffect)((function(){Y()}),[Y]),Object(n.useEffect)((function(){S(!0),D.get("/order_statuses").then((function(e){g(e.data)})).catch((function(){F.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441\u044b"})})).finally((function(){S(!1)})),P(!0),D.get("/users").then((function(e){E(e.data)})).catch((function(){F.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u044e\u0437\u0435\u0440\u043e\u0432"})})).finally((function(){P(!1)}))}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"table-controls",children:Object(a.jsx)(i.b,{to:"/orders/new",children:Object(a.jsx)(N.a,{className:"green-button",type:"primary",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})})}),Object(a.jsxs)("div",{className:"table-filters",children:["\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c:",Object(a.jsxs)(q.a,{style:{width:300},allowClear:!0,loading:T,onChange:function(e){return V({order:e})},defaultValue:'[["createdAt", "DESC"]]',children:[Object(a.jsx)(q.a.Option,{value:'[["createdAt", "DESC"]]',children:"\u043f\u043e \u0434\u0430\u0442\u0435 (\u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u043e\u0432\u044b\u0435)"}),Object(a.jsx)(q.a.Option,{value:'[["createdAt", "ASC"]]',children:"\u043f\u043e \u0434\u0430\u0442\u0435 (\u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0440\u044b\u0435)"})]})," ",Object(a.jsx)(q.a,{placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441",style:{width:300},allowClear:!0,loading:v,onChange:function(e){return K({orderStatusId:e})},children:p.map((function(e){return Object(a.jsx)(q.a.Option,{value:e.id,children:e.name},e.id)}))})," ",Object(a.jsxs)(q.a,{placeholder:"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439",style:{width:300},allowClear:!0,loading:T,onChange:function(e){return K({userId:e})},children:[C.map((function(e){return Object(a.jsxs)(q.a.Option,{value:e.id,children:[e.fullName,", ",e.username]},e.id)})),Object(a.jsx)(q.a.Option,{value:null,children:"\u041d\u0438\u043a\u0442\u043e"})]})]}),Object(a.jsx)(J,{orders:j.data,loading:c,fetchOrders:Y}),Object(a.jsx)("div",{className:"pagination",children:Object(a.jsx)(z.a,{total:j.totalItems,defaultPageSize:m.size,onChange:function(e){V({page:e})}})})]})},R=(c(359),{admin:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440",manager:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"}),W=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)([]),j=Object(l.a)(r,2),u=j[0],d=j[1],b=Object(o.c)(I),m=Object(n.useCallback)((function(){s(!0),D.get("/users").then((function(e){d(e.data)})).catch((function(e){})).finally((function(){s(!1)}))}),[s,d]),O=Object(n.useMemo)((function(){return[{title:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",dataIndex:"username",key:"username"},{title:"\u0424\u0418\u041e",dataIndex:"fullName",key:"fullName"},{title:"Email",dataIndex:"email",key:"email"},{title:"\u0420\u043e\u043b\u044c",dataIndex:["role","name"],key:"role",render:function(e){return Object(a.jsx)(V.a,{color:"admin"===e?"geekblue":"green",children:R[e]})}},{title:"",key:"action",render:function(e,t){return Object(a.jsxs)(M.b,{size:"middle",children:[Object(a.jsx)(i.b,{to:t.id===b.id?"/profile":"/users/".concat(t.id),children:Object(a.jsx)(N.a,{size:"small",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),t.id!==b.id&&Object(a.jsx)(H,{url:"/users/".concat(t.id),onSuccess:m,successMessage:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ".concat(t.username," \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d"),errorMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})}}]}),[b,m]);return Object(n.useEffect)((function(){m()}),[m]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"table-controls",children:Object(a.jsx)(i.b,{to:"/users/new",children:Object(a.jsx)(N.a,{className:"green-button",type:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})}),Object(a.jsx)(A.a,{columns:O,dataSource:u,rowKey:"id",loading:c})]})},G=c(381),Q=c(74),X=c(382),Z=c(390),$=q.a.Option,ee={labelCol:{xs:{span:16},sm:{span:8}},wrapperCol:{xs:{span:16},sm:{span:8}}},te={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},ce=function(e){var t=e.user,c=void 0===t?{}:t,s=e.onSuccess,r=G.a.useForm(),i=Object(l.a)(r,1)[0],o=S(),j=Object(l.a)(o,3)[2],u=Object(n.useState)(!1),d=Object(l.a)(u,2),b=d[0],m=d[1],O=Object(n.useState)(!1),h=Object(l.a)(O,2),x=h[0],p=h[1],g=!!c.id;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(G.a,Object(f.a)(Object(f.a)({},ee),{},{form:i,name:"user",onFinish:function(e){m(!0);var t={username:e.username,email:e.email,fullName:e.fullName};g&&x&&(t.password=e.password),e.roleId&&(t.roleId=Number(e.roleId)),(g?D.put("/users/".concat(c.id),t):D.post("/auth/signup",Object(f.a)(Object(f.a)({},t),{},{password:e.password}))).then((function(e){F.a.success({message:g?"\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ".concat(e.data.username," \u0431\u044b\u043b\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"):"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ".concat(e.data.username," \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e")}),s&&s(e.data)}),(function(){F.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})})).finally((function(){m(!1)}))},initialValues:g?Object(f.a)(Object(f.a)({},c),{},{roleId:String(c.role.id)}):{roleId:"2"},scrollToFirstError:!0,children:[Object(a.jsx)(G.a.Item,{name:"username",label:Object(a.jsxs)("span",{children:["\u041b\u043e\u0433\u0438\u043d\xa0",Object(a.jsx)(Q.a,{title:"\u041b\u043e\u0433\u0438\u043d \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0439 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430",children:Object(a.jsx)(Z.a,{})})]}),rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",whitespace:!0}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 E-mail"},{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 E-mail"}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{name:"fullName",label:"\u0424\u0418\u041e",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e",whitespace:!0}],children:Object(a.jsx)(X.a,{})}),j&&Object(a.jsx)(G.a.Item,{name:"roleId",label:"\u0420\u043e\u043b\u044c",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u044c!"}],children:Object(a.jsxs)(q.a,{children:[Object(a.jsx)($,{value:"1",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"}),Object(a.jsx)($,{value:"2",children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"})]})}),g&&Object(a.jsx)(G.a.Item,Object(f.a)(Object(f.a)({},te),{},{children:Object(a.jsx)(N.a,{onClick:function(){p((function(e){return!e}))},children:x?"\u041e\u0442\u043c\u0435\u043d\u0430":"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})})),(!g||x)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(G.a.Item,{name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}],hasFeedback:!0,children:Object(a.jsx)(X.a.Password,{autoComplete:"new-password"})}),Object(a.jsx)(G.a.Item,{name:"confirm",label:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},function(e){var t=e.getFieldValue;return{validator:function(e,c){return c&&t("password")!==c?Promise.reject("\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c"):Promise.resolve()}}}],children:Object(a.jsx)(X.a.Password,{})})]}),Object(a.jsx)(G.a.Item,Object(f.a)(Object(f.a)({},te),{},{children:Object(a.jsx)(N.a,{type:"primary",htmlType:"submit",loading:b,children:g?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}))]}))})},ae=function(){var e=S(),t=Object(l.a)(e,2),c=t[0],n=t[1];return Object(a.jsx)(ce,{user:c,onSuccess:function(e){n(e)}})},ne=c(194),se=(c(368),function(e){return Object(a.jsx)("div",{className:"spinner",children:Object(a.jsx)(ne.a,Object(f.a)({},e))})}),re=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(j.h)().id,i=Object(j.f)();return Object(n.useEffect)((function(){D.get("/users/".concat(r)).then((function(e){s(e.data)})).catch((function(e){console.log(e)}))}),[s,r]),c?Object(a.jsx)(ce,{user:c,onSuccess:function(){i.push("/users")}}):Object(a.jsx)(se,{size:"large"})},ie=function(){var e=Object(j.f)();return Object(a.jsx)(ce,{onSuccess:function(){e.push("/users")}})},oe=c(378),je=c(379),le=c(130),ue=c(129),de=c(385),be=c(391),me=c(392),Oe={labelCol:{xs:{span:16},sm:{span:8}},wrapperCol:{xs:{span:16},sm:{span:8}}},he={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},xe=q.a.Option,fe=function(e){var t=e.form,c=Object(n.useState)([]),s=Object(l.a)(c,2),r=s[0],i=s[1],o=Object(n.useState)(!1),j=Object(l.a)(o,2),u=j[0],d=j[1];return Object(n.useEffect)((function(){d(!0),D.get("/products").then((function(e){i(e.data)})).catch((function(){F.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u0432"})})).finally((function(){d(!1)}))}),[i,d]),Object(a.jsx)(G.a.List,{name:"products",children:function(e,c){var n=c.add,s=c.remove;return Object(a.jsxs)(a.Fragment,{children:[e.map((function(e){return Object(a.jsxs)(oe.a,{gutter:24,align:"middle",children:[Object(a.jsx)(je.a,{xs:16,children:Object(a.jsx)(G.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){var c=(t.getFieldValue("products")||[]).filter((function(e){return e&&e.id})).map((function(e){return e.id}));return Object(a.jsx)(G.a.Item,Object(f.a)(Object(f.a)({},e),{},{label:"\u0422\u043e\u0432\u0430\u0440",name:[e.name,"id"],fieldKey:[e.fieldKey,"id"],rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440"}],children:Object(a.jsx)(q.a,{disabled:u,children:r.map((function(e){return Object(a.jsx)(xe,{disabled:c.includes(e.id),value:e.id,children:e.name},e.id)}))})}))}})}),Object(a.jsx)(je.a,{xs:5,children:Object(a.jsx)(G.a.Item,Object(f.a)(Object(f.a)({},e),{},{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",name:[e.name,"quantity"],fieldKey:[e.fieldKey,"quantity"],rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",type:"number",min:1}],children:Object(a.jsx)(de.a,{})}))}),Object(a.jsx)(je.a,{xs:1,children:Object(a.jsx)(be.a,{onClick:function(){return s(e.name)}})})]},e.key)})),e.length<r.length&&Object(a.jsx)(G.a.Item,Object(f.a)(Object(f.a)({},he),{},{children:Object(a.jsx)(N.a,{type:"dashed",onClick:function(){return n()},icon:Object(a.jsx)(me.a,{}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"})}))]})}})},pe=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(G.a.Item,{name:["customer","email"],label:"Email",rules:[{type:"email",message:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 E-mail"},{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 E-mail",whitespace:!0}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{name:["customer","organizationName"],label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",whitespace:!0}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{name:["customer","address"],label:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441",whitespace:!0}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{name:["customer","bankAccountNumber"],label:"\u041d\u043e\u043c\u0435\u0440 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0451\u0442\u0430",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0451\u0442\u0430",whitespace:!0}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{name:["customer","bankName"],label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430",whitespace:!0}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{name:["customer","payerAccountNumber"],label:"\u0423\u041d\u041f",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u0423\u041d\u041f (9 \u0446\u0438\u0444\u0440)",whitespace:!0,len:9}],children:Object(a.jsx)(X.a,{})})]})},ge=function(e){var t=e.form;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(G.a.Item,{name:"deliveryMethodId",label:"\u0421\u043f\u043e\u0441\u043e\u0431 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",children:Object(a.jsxs)(q.a,{children:[Object(a.jsx)(q.a.Option,{value:1,children:"\u0421\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437"}),Object(a.jsx)(q.a.Option,{value:2,children:"\u041a\u0443\u0440\u044c\u0435\u0440 (Autolight Express)"})]})}),Object(a.jsx)(G.a.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return 1===t.getFieldValue("deliveryMethodId")?null:Object(a.jsx)(G.a.Item,{name:"deliveryAddress",label:"\u0410\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441",whitespace:!0}],children:Object(a.jsx)(X.a,{})})}}),Object(a.jsx)(G.a.Item,{name:"contactNumber",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440",rules:[{required:!0,message:"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 9 \u0446\u0438\u0444\u0440"}],children:Object(a.jsx)(X.a,{addonBefore:"+375",style:{width:"100%"}})}),Object(a.jsx)(G.a.Item,{name:"contactName",label:"\u0418\u043c\u044f",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043c\u044f"}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return 1===t.getFieldValue("deliveryMethodId")?null:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(G.a.Item,{name:"contactSurname",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e",whitespace:!0}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{name:"contactPatronymic",label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",whitespace:!0}],children:Object(a.jsx)(X.a,{})})]})}})]})},ye=q.a.Option,Ie={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},ve=function(e){var t=e.order,c=void 0===t?{}:t,s=e.onSuccess,r=G.a.useForm(),o=Object(l.a)(r,1)[0],j=Object(n.useState)({data:[]}),u=Object(l.a)(j,2),d=u[0],b=u[1],m=Object(n.useState)(!1),O=Object(l.a)(m,2),h=O[0],x=O[1],p=Object(n.useState)([]),g=Object(l.a)(p,2),y=g[0],I=g[1],v=Object(n.useState)(!1),w=Object(l.a)(v,2),k=w[0],C=w[1],z=Object(n.useState)([]),E=Object(l.a)(z,2),M=E[0],A=E[1],T=Object(n.useState)(!1),P=Object(l.a)(T,2),V=P[0],K=P[1],Y=Object(n.useState)(!1),U=Object(l.a)(Y,2),_=U[0],B=U[1],H=Object(n.useState)(1),J=Object(l.a)(H,2),L=J[0],R=J[1],W=!!c.id,Q=S(),Z=Object(l.a)(Q,1)[0],$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";x(!0),D.get("/customers",{params:{page:1,size:10,search:e}}).then((function(e){b(e.data)})).catch((function(){F.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u0432"})})).finally((function(){x(!1)}))};Object(n.useEffect)((function(){$(),C(!0),D.get("/order_statuses").then((function(e){I(e.data)})).catch((function(){F.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441\u044b"})})).finally((function(){C(!1)})),K(!0),D.get("/users").then((function(e){A(e.data)})).catch((function(){F.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u044e\u0437\u0435\u0440\u043e\u0432"})})).finally((function(){K(!1)}))}),[b,x]);var ee=(c.products||[]).map((function(e){return{id:e.id,quantity:e.order_product.quantity}}));return Object(a.jsxs)(a.Fragment,{children:[W&&Object(a.jsx)("div",{className:"table-controls",children:Object(a.jsx)(i.b,{to:"/orders/".concat(c.id),children:Object(a.jsx)(N.a,{type:"primary",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"})})}),Object(a.jsxs)(G.a,{layout:"vertical",form:o,name:"order",onFinish:function(e){var t=[];if(W){var a=e.products.map((function(e){return e.id})),n=ee.reduce((function(e,t){return a.includes(t.id)||e.push(Object(f.a)(Object(f.a)({},t),{},{_destroy:!0})),e}),[]);e.products=e.products.concat(n)}W||e.products&&e.products.length||t.push("\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b \u0442\u043e\u0432\u0430\u0440\u044b"),t.length?F.a.error({message:t.join(". ")}):(B(!0),(W?D.put("/orders/".concat(c.id),e):D.post("/orders",e)).then((function(e){F.a.success({message:W?"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b":"\u0417\u0430\u043a\u0430\u0437 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"}),s&&s(e.data)}),(function(){F.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"})})).finally((function(){B(!1)})))},initialValues:W?{deliveryMethodId:c.deliveryMethodId,deliveryAddress:c.deliveryAddress,contactNumber:c.contactNumber,contactName:c.contactName,contactSurname:c.contactSurname,contactPatronymic:c.contactPatronymic,notes:c.notes,orderStatusId:c.orderStatusId,userId:c.userId,products:ee}:{deliveryMethodId:1,orderStatusId:1,products:[{id:null,quantity:1}]},scrollToFirstError:!0,style:{maxWidth:750,margin:"0 auto"},children:[Object(a.jsx)(fe,{form:o}),Object(a.jsxs)("div",{style:{marginBottom:"50px"},children:[Object(a.jsx)(ge,{form:o}),Object(a.jsx)(G.a.Item,{name:"notes",label:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0438 \u043f\u043e\u0436\u0435\u043b\u0430\u043d\u0438\u044f",children:Object(a.jsx)(X.a.TextArea,{})}),Object(a.jsx)(G.a.Item,{name:"orderStatusId",label:"\u0421\u0442\u0430\u0442\u0443\u0441",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441"}],children:Object(a.jsx)(q.a,{loading:k,children:y.map((function(e){return Object(a.jsx)(ye,{value:e.id,children:e.name},e.id)}))})}),Object(a.jsx)(G.a.Item,{shouldUpdate:!0,label:"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439",children:function(){return Object(a.jsxs)(oe.a,{gutter:24,children:[Object(a.jsx)(je.a,{span:18,children:Object(a.jsx)(G.a.Item,{name:"userId",noStyle:!0,children:Object(a.jsx)(q.a,{loading:V,children:M.map((function(e){return Object(a.jsx)(ye,{value:e.id,children:"".concat(e.fullName||""," ").concat(e.email,", ").concat(e.username)},e.id)}))})})}),o.getFieldValue("userId")===Z.id?null:Object(a.jsx)(je.a,{span:6,children:Object(a.jsx)(N.a,{type:"primary",onClick:function(){o.setFieldsValue({userId:Z.id})},children:"\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u043c\u0435\u043d\u044f"})})]})}})]}),W?null:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(G.a.Item,{label:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a",children:Object(a.jsxs)(le.a.Group,{onChange:function(e){R(e.target.value)},value:L,children:[Object(a.jsx)(le.a,{value:1,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430"}),Object(a.jsx)(le.a,{value:2,children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e"})]})}),1===L?Object(a.jsx)(pe,{}):Object(a.jsx)(G.a.Item,{name:"customerId",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430"}],children:Object(a.jsx)(q.a,{showSearch:!0,loading:h,notFoundContent:h?Object(a.jsx)(ne.a,{size:"small"}):null,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e Email",onSearch:Object(ue.a)(500,$),filterOption:!1,children:d.data.map((function(e){return Object(a.jsx)(ye,{value:e.id,children:"".concat(e.organizationName,", ").concat(e.address,", ").concat(e.email)},e.id)}))})})]}),Object(a.jsx)(G.a.Item,Object(f.a)(Object(f.a)({},Ie),{},{children:Object(a.jsx)(N.a,{type:"primary",htmlType:"submit",loading:_,children:W?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}))]})]})},Se=function(){var e=Object(j.f)();return Object(a.jsx)(ve,{onSuccess:function(t){var c=t.id;e.push("/orders/".concat(c))}})},Ne=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(j.h)().id,i=Object(j.f)();return Object(n.useEffect)((function(){D.get("/orders/".concat(r)).then((function(e){s(e.data)})).catch((function(e){console.log(e)}))}),[r]),c?Object(a.jsx)(ve,{order:c,onSuccess:function(e){var t=e.id;i.push("/orders/".concat(t))}}):Object(a.jsx)(se,{size:"large"})},we=c(384),ke=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(j.h)().id;return Object(n.useEffect)((function(){D.get("/orders/".concat(r)).then((function(e){s(e.data)})).catch((function(e){console.log(e)}))}),[r]),c?Object(a.jsxs)(we.a,{bordered:!0,title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0435",extra:Object(a.jsx)(i.b,{to:"/orders/".concat(r,"/edit"),children:Object(a.jsx)(N.a,{type:"primary",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),children:[Object(a.jsx)(we.a.Item,{label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u0430",children:(c.products||[]).map((function(e){return Object(a.jsxs)(n.Fragment,{children:[e.name," (",e.order_product.quantity," \u0448\u0442)",Object(a.jsx)("br",{})]},e.id)}))}),Object(a.jsx)(we.a.Item,{label:"\u0421\u043e\u0437\u0434\u0430\u043d",children:P()(c.createdAt).format("D MMMM YYYY, HH:mm")}),Object(a.jsxs)(we.a.Item,{label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e",children:[c.contactSurname," ",c.contactName," ",c.contactPatronymic," ","+375".concat(c.contactNumber)]}),Object(a.jsx)(we.a.Item,{label:"\u0421\u043f\u043e\u0441\u043e\u0431 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",children:c.deliveryMethod.name}),c.deliveryAddress&&Object(a.jsx)(we.a.Item,{label:"\u0410\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",children:c.deliveryAddress}),c.notes&&Object(a.jsx)(we.a.Item,{label:"\u0414\u043e\u043f. \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",children:c.notes}),Object(a.jsx)(we.a.Item,{label:"\u0421\u0442\u0430\u0442\u0443\u0441",children:Object(a.jsx)(Y,Object(f.a)({},c.orderStatus))}),Object(a.jsx)(we.a.Item,{label:"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439",children:c.user?Object(a.jsxs)(a.Fragment,{children:[c.user.fullName&&Object(a.jsxs)(a.Fragment,{children:[c.user.fullName,Object(a.jsx)("br",{})]}),c.user.username,Object(a.jsx)("br",{}),c.user.email,Object(a.jsx)("br",{})]}):"\u041d\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d"}),Object(a.jsx)(we.a.Item,{label:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a",children:Object(a.jsxs)(i.b,{to:"/customers/".concat(c.customer.id),children:[c.customer.organizationName,Object(a.jsx)("br",{}),c.customer.email,Object(a.jsx)("br",{}),c.customer.address,Object(a.jsx)("br",{}),c.customer.bankName," (",c.customer.bankAccountNumber,")",Object(a.jsx)("br",{}),"\u0423\u041d\u041f: ",c.customer.payerAccountNumber]})})]}):Object(a.jsx)(se,{size:"large"})},Ce=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)([]),o=Object(l.a)(r,2),j=o[0],u=o[1],d=Object(n.useState)({page:1,size:10}),b=Object(l.a)(d,2),m=b[0],O=b[1],h=function(e){O((function(t){return Object(f.a)(Object(f.a)({},t),e)}))},x=Object(n.useCallback)((function(){s(!0),D.get("/customers",{params:m}).then((function(e){u(e.data)})).catch((function(){F.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u0432"})})).finally((function(){s(!1)}))}),[s,u,m]),p=Object(n.useMemo)((function(){return[{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",dataIndex:"organizationName"},{title:"Email",dataIndex:"email"},{title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432",dataIndex:["orders","length"]},{title:"",key:"action",render:function(e,t){return Object(a.jsxs)(M.b,{size:"middle",children:[Object(a.jsx)(H,{url:"/customers/".concat(t.id),onSuccess:x,successMessage:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d",errorMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430"}),Object(a.jsx)(i.b,{to:"/customers/".concat(t.id,"/edit"),children:Object(a.jsx)(N.a,{size:"small",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),Object(a.jsx)(i.b,{to:"/customers/".concat(t.id),children:Object(a.jsx)(N.a,{size:"small",children:"\u0414\u0435\u0442\u0430\u043b\u0438"})})]})}}]}),[x]);Object(n.useEffect)((function(){x()}),[x]);var g=Object(ue.a)(500,(function(e){h({search:e.target.value,page:1,size:10})}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"table-controls",children:Object(a.jsx)(i.b,{to:"/customers/new",children:Object(a.jsx)(N.a,{className:"green-button",type:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})}),Object(a.jsx)("div",{className:"table-filters",children:Object(a.jsx)(X.a,{style:{width:300},onChange:g,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e Email"})}),Object(a.jsx)(A.a,{columns:p,dataSource:j.data,rowKey:"id",loading:c,pagination:!1}),Object(a.jsx)("div",{className:"pagination",children:Object(a.jsx)(z.a,{total:j.totalItems,defaultPageSize:m.size,onChange:function(e){h({page:e})}})})]})},Fe=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(j.h)().id,o=Object(n.useCallback)((function(){D.get("/customers/".concat(r)).then((function(e){s(e.data)})).catch((function(e){console.log(e)}))}),[r,s]);return Object(n.useEffect)((function(){o()}),[o]),c?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{style:{marginBottom:40},children:Object(a.jsxs)(we.a,{bordered:!0,title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0435",extra:Object(a.jsx)(i.b,{to:"/customers/".concat(r,"/edit"),children:Object(a.jsx)(N.a,{type:"primary",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),children:[Object(a.jsx)(we.a.Item,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",children:c.organizationName}),Object(a.jsx)(we.a.Item,{label:"Email",children:c.email}),Object(a.jsx)(we.a.Item,{label:"\u0410\u0434\u0440\u0435\u0441",children:c.address}),Object(a.jsx)(we.a.Item,{label:"\u041d\u043e\u0431\u0435\u0440 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0451\u0442\u0430",children:c.bankAccountNumber}),Object(a.jsx)(we.a.Item,{label:"\u0411\u0430\u043d\u043a",children:c.bankName}),Object(a.jsx)(we.a.Item,{label:"\u0423\u041d\u041f",children:c.payerAccountNumber})]})}),Object(a.jsx)("h2",{children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),Object(a.jsx)(J,{orders:c.orders,showCustomer:!1,loading:!1,fetchOrders:o})]}):Object(a.jsx)(se,{size:"large"})},qe={labelCol:{xs:{span:16},sm:{span:8}},wrapperCol:{xs:{span:16},sm:{span:8}}},ze={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},Ee=function(e){var t=e.customer,c=void 0===t?{}:t,s=e.onSuccess,r=G.a.useForm(),i=Object(l.a)(r,1)[0],o=Object(n.useState)(!1),j=Object(l.a)(o,2),u=j[0],d=j[1],b=!!c.id;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(G.a,Object(f.a)(Object(f.a)({},qe),{},{form:i,name:"customer",onFinish:function(e){d(!0),(b?D.put("/customers/".concat(c.id),e):D.post("/customers",e)).then((function(e){F.a.success({message:b?"\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430 ".concat(e.data.organizationName," \u0431\u044b\u043b\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"):"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430 ".concat(e.data.organizationName," \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e")}),s&&s(e.data)}),(function(){F.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430"})})).finally((function(){d(!1)}))},initialValues:b?{email:c.email,organizationName:c.organizationName,address:c.address,bankAccountNumber:c.bankAccountNumber,bankName:c.bankName,payerAccountNumber:c.payerAccountNumber}:{},scrollToFirstError:!0,children:[Object(a.jsx)(G.a.Item,{name:"email",label:"Email",rules:[{type:"email",message:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 E-mail"},{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 E-mail",whitespace:!0}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{name:"organizationName",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",whitespace:!0}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{name:"address",label:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441",whitespace:!0}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{name:"bankAccountNumber",label:"\u041d\u043e\u043c\u0435\u0440 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0451\u0442\u0430",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0451\u0442\u0430",whitespace:!0}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{name:"bankName",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430",whitespace:!0}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{name:"payerAccountNumber",label:"\u0423\u041d\u041f",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u0423\u041d\u041f (9 \u0446\u0438\u0444\u0440)"}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,Object(f.a)(Object(f.a)({},ze),{},{children:Object(a.jsx)(N.a,{type:"primary",htmlType:"submit",loading:u,children:b?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}))]}))})},Me=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(j.h)().id,i=Object(j.f)();return Object(n.useEffect)((function(){D.get("/customers/".concat(r)).then((function(e){s(e.data)})).catch((function(e){console.log(e)}))}),[r]),c?Object(a.jsx)(Ee,{customer:c,onSuccess:function(e){var t=e.id;i.push("/customers/".concat(t))}}):Object(a.jsx)(se,{size:"large"})},Ae=function(){var e=Object(j.f)();return Object(a.jsx)(Ee,{onSuccess:function(t){var c=t.id;e.push("/customers/".concat(c))}})},Te=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)([]),o=Object(l.a)(r,2),j=o[0],u=o[1],d=Object(n.useCallback)((function(){s(!0),D.get("/products").then((function(e){u(e.data)})).catch((function(){F.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"})})).finally((function(){s(!1)}))}),[s,u]),b=Object(n.useMemo)((function(){return[{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",dataIndex:"name"},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",dataIndex:"description"},{title:"",key:"action",render:function(e,t){return Object(a.jsxs)(M.b,{size:"middle",children:[Object(a.jsx)(H,{url:"/products/".concat(t.id),onSuccess:d,successMessage:"\u0422\u043e\u0432\u0430\u0440 \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d",errorMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"}),Object(a.jsx)(i.b,{to:"/products/".concat(t.id,"/edit"),children:Object(a.jsx)(N.a,{size:"small",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]})}}]}),[d]);return Object(n.useEffect)((function(){d()}),[d]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"table-controls",children:Object(a.jsx)(i.b,{to:"/products/new",children:Object(a.jsx)(N.a,{className:"green-button",type:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})}),Object(a.jsx)(A.a,{columns:b,dataSource:j,rowKey:"id",loading:c})]})},Pe=function(e){var t=e.product,c=void 0===t?{}:t,s=e.onSuccess,r=G.a.useForm(),i=Object(l.a)(r,1)[0],o=Object(n.useState)(!1),j=Object(l.a)(o,2),u=j[0],d=j[1],b=!!c.id;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(G.a,Object(f.a)(Object(f.a)({},Oe),{},{form:i,name:"product",onFinish:function(e){d(!0),(b?D.put("/products/".concat(c.id),e):D.post("/products",e)).then((function(e){F.a.success({message:b?"\u0414\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 ".concat(e.data.name," \u0431\u044b\u043b\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"):"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 ".concat(e.data.name," \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e")}),s&&s(e.data)}),(function(){F.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u0430"})})).finally((function(){d(!1)}))},initialValues:b?{name:c.name,description:c.description}:{},scrollToFirstError:!0,children:[Object(a.jsx)(G.a.Item,{name:"name",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",whitespace:!0}],children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(G.a.Item,{name:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",children:Object(a.jsx)(X.a.TextArea,{})}),Object(a.jsx)(G.a.Item,Object(f.a)(Object(f.a)({},he),{},{children:Object(a.jsx)(N.a,{type:"primary",htmlType:"submit",loading:u,children:b?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}))]}))})},Ve=function(){var e=Object(j.f)();return Object(a.jsx)(Pe,{onSuccess:function(){e.push("/products")}})},Ke=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(j.h)().id,i=Object(j.f)();return Object(n.useEffect)((function(){D.get("/products/".concat(r)).then((function(e){s(e.data)})).catch((function(e){console.log(e)}))}),[r]),c?Object(a.jsx)(Pe,{product:c,onSuccess:function(){i.push("/products")}}):Object(a.jsx)(se,{size:"large"})},Ye=u.a.Content,Ue=u.a.Sider,_e=[{path:"/",component:Object(a.jsx)(L,{})},{path:"/orders/new",component:Object(a.jsx)(Se,{})},{path:"/orders/:id/edit",component:Object(a.jsx)(Ne,{})},{path:"/orders/:id",component:Object(a.jsx)(ke,{})},{path:"/users",component:Object(a.jsx)(W,{})},{path:"/users/new",component:Object(a.jsx)(ie,{})},{path:"/users/:id",component:Object(a.jsx)(re,{})},{path:"/customers",component:Object(a.jsx)(Ce,{})},{path:"/customers/new",component:Object(a.jsx)(Ae,{})},{path:"/customers/:id",component:Object(a.jsx)(Fe,{})},{path:"/customers/:id/edit",component:Object(a.jsx)(Me,{})},{path:"/products",component:Object(a.jsx)(Te,{})},{path:"/products/new",component:Object(a.jsx)(Ve,{})},{path:"/products/:id/edit",component:Object(a.jsx)(Ke,{})},{path:"/profile",component:Object(a.jsx)(ae,{})}],Be=function(){var e=S(),t=Object(l.a)(e,3)[2],c=Object(j.g)(),s=Object(n.useMemo)((function(){return c.pathname.match("/users")?"users":c.pathname.match("/customers")?"customers":c.pathname.match("/products")?"products":c.pathname.match("/profile")?"profile":"orders"}),[c.pathname]);return Object(a.jsxs)(u.a,{children:[Object(a.jsxs)(Ue,{breakpoint:"lg",collapsedWidth:"0",children:[Object(a.jsx)("div",{className:"logo",children:"Axiom Admin"}),Object(a.jsxs)(d.a,{theme:"dark",mode:"inline",selectedKeys:[s],children:[Object(a.jsx)(d.a.Item,{icon:Object(a.jsx)(b.a,{}),children:Object(a.jsx)(i.b,{to:"/",children:"\u0417\u0430\u043a\u0430\u0437\u044b"})},"orders"),t&&Object(a.jsx)(d.a.Item,{icon:Object(a.jsx)(m.a,{}),children:Object(a.jsx)(i.b,{to:"/users",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})},"users"),Object(a.jsx)(d.a.Item,{icon:Object(a.jsx)(O.a,{}),children:Object(a.jsx)(i.b,{to:"/customers",children:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0438"})},"customers"),Object(a.jsx)(d.a.Item,{icon:Object(a.jsx)(h.a,{}),children:Object(a.jsx)(i.b,{to:"/products",children:"\u0422\u043e\u0432\u0430\u0440\u044b"})},"products"),Object(a.jsx)(d.a.Item,{icon:Object(a.jsx)(x.a,{}),children:Object(a.jsx)(i.b,{to:"/profile",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})},"profile")]})]}),Object(a.jsxs)(u.a,{children:[Object(a.jsx)(C,{}),Object(a.jsx)(Ye,{style:{margin:"24px 16px 0"},children:Object(a.jsx)("div",{className:"site-layout-background",style:{padding:24},children:t?Object(a.jsx)(j.c,{children:_e.map((function(e){return Object(a.jsx)(j.a,{exact:!0,path:e.path,children:e.component},e.path)}))}):Object(a.jsx)(j.c,{children:_e.filter((function(e){return!e.path.match("/users")})).map((function(e){return Object(a.jsx)(j.a,{exact:!0,path:e.path,children:e.component},e.path)}))})})})]})]})},De=(c(371),c(398)),He=(c(372),function(){var e=S(),t=Object(l.a)(e,2)[1],c=Object(n.useState)(!1),s=Object(l.a)(c,2),r=s[0],i=s[1];return Object(a.jsx)("div",{className:"login-form-wrapper",children:Object(a.jsx)("div",{className:"login-form-container",children:Object(a.jsxs)(G.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(e){i(!0),D.post("/auth/signin",{username:e.username,password:e.password}).then((function(e){e.data.accessToken&&localStorage.setItem("token",e.data.accessToken),t(e.data)})).catch((function(){F.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432\u0445\u043e\u0434"})})).finally((function(){i(!1)}))},children:[Object(a.jsx)(G.a.Item,{name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"}],children:Object(a.jsx)(X.a,{prefix:Object(a.jsx)(x.a,{className:"site-form-item-icon"}),placeholder:"\u041b\u043e\u0433\u0438\u043d"})}),Object(a.jsx)(G.a.Item,{name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}],children:Object(a.jsx)(X.a.Password,{prefix:Object(a.jsx)(De.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(a.jsx)(G.a.Item,{children:Object(a.jsx)(N.a,{loading:r,type:"primary",htmlType:"submit",className:"login-form-button",children:"\u0412\u043e\u0439\u0442\u0438"})})]})})})});c(373);P.a.locale("ru");var Je=function(){var e=Object(o.b)(),t=Object(o.c)(I);return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t&&e(y(t))}),[e]),t?Object(a.jsx)(Be,{}):Object(a.jsx)(j.c,{children:Object(a.jsx)(j.a,{exact:!0,path:"/",children:Object(a.jsx)(He,{})})})},Le=Object(p.a)({reducer:{auth:v}}),Re=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,399)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))};c(374);r.a.render(Object(a.jsx)(o.a,{store:Le,children:Object(a.jsx)(i.a,{children:Object(a.jsx)(Je,{})})}),document.getElementById("root")),Re()}},[[375,1,2]]]);
//# sourceMappingURL=main.fda4c97b.chunk.js.map