(this["webpackJsonpaxiom-admin"]=this["webpackJsonpaxiom-admin"]||[]).push([[0],{1032:function(e,t,c){},1041:function(e,t,c){},1312:function(e,t,c){},1313:function(e,t,c){},1315:function(e,t,c){},1321:function(e,t,c){"use strict";c.r(t);var a=c(3),n=(c(711),c(0)),r=c(48),s=c(684),i=c.n(s),o=c(74),l=c.n(o),j=c(45),u=c(153),d=c(95),b=c(16),m=c(1328),O=c(229),h=c(1345),x=c(1346),f=c(1347),p=c(1348),g=c(1349),y=c(1350),v=c(22),I=c(378),S=Object(I.b)({name:"auth",initialState:{user:null},reducers:{setUser:function(e,t){e.user=t.payload}}}),N=S.actions.setUser,w=function(e){return e.auth.user},k=S.reducer,C=function(){var e=Object(u.b)(),t=Object(u.c)(w),c=Object(n.useMemo)((function(){return t||JSON.parse(localStorage.getItem("user"))||{}}),[t]),a=Object(n.useMemo)((function(){return c&&c.role&&"admin"===c.role.name}),[c]),r=Object(n.useCallback)((function(t){var a=Object(v.a)(Object(v.a)({},c),t);e(N(a)),localStorage.setItem("user",JSON.stringify(a))}),[c,e]);return[c,r,a]},F=c(127),z=c(1341),E=m.a.Header,q=function(){var e=Object(u.b)(),t=Object(d.f)();return Object(a.jsx)(E,{className:"site-layout-sub-header-background",children:Object(a.jsx)(F.a,{type:"primary",icon:Object(a.jsx)(z.a,{}),onClick:function(){e(N(null)),localStorage.removeItem("user"),localStorage.removeItem("token"),t.push("/")},children:"\u0412\u044b\u0439\u0442\u0438"})})},M=c(694),A=c(303),P=c(688),T=c(689),Y=c(1340),J=c(1333),V=c(170),B=c.n(V),D=c(693),K={1:"orange",2:"geekblue",3:"blue",4:"cyan",5:"lime",6:"purple",7:"green"},_=function(e){var t=e.id,c=e.name;return Object(a.jsx)(D.a,{color:K[t],children:c})},H=c(1339),U=c(649),R=c.n(U).a.create({baseURL:"/api/"});R.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers["x-access-token"]=t),e}),(function(e){return Promise.reject(e)})),R.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&M.a.error({message:e.response.data.message||"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438!"}),Promise.reject(e.response)}));var W=R,L=function(e){var t=e.onSuccess,c=void 0===t?function(){}:t,r=e.url,s=e.successMessage,i=e.errorMessage,o=Object(n.useState)(!1),l=Object(b.a)(o,2),j=l[0],u=l[1],d=Object(n.useState)(!1),m=Object(b.a)(d,2),O=m[0],h=m[1];return Object(a.jsx)(H.a,{title:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?",placement:"topRight",visible:j,onConfirm:function(){h(!0),W.delete(r).then((function(){M.a.success({message:s}),c()})).catch((function(e){M.a.error({message:i}),console.error(e)})).finally((function(){h(!1),u(!1)}))},okText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okButtonProps:{loading:O,danger:!0},onCancel:function(){u(!1)},children:Object(a.jsx)(F.a,{size:"small",danger:!0,onClick:function(){u(!0)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})},G=function(e){var t=e.orders,c=e.loading,r=e.showCustomer,s=void 0===r||r,i=e.fetchOrders,o=C(),l=Object(b.a)(o,1)[0],u=Object(d.f)(),m=[{title:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",dataIndex:"createdAt",render:function(e){return B()(e).format("D MMMM YYYY, HH:mm")}},{title:"\u0421\u0447\u0451\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430",dataIndex:"invoice"}].concat(Object(T.a)(s?[{title:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a",dataIndex:"customer",render:function(e){return Object(a.jsx)(j.b,{to:"/customers/".concat(e.id),children:e.organizationName})}}]:[]),[{title:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u0430",dataIndex:"products",render:function(e){return e&&!!e.length&&e.map((function(e){return Object(a.jsxs)(n.Fragment,{children:[e.name," (",e.order_product.quantity," \u0448\u0442)",Object(a.jsx)("br",{})]},e.id)}))}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"orderStatus",render:function(e){return Object(a.jsx)(_,{id:e.id,name:e.name})}},{title:"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439",dataIndex:"user",render:function(e){return e&&"".concat(e.fullName||"",", ").concat(e.username)}},{title:"",key:"action",render:function(e,t){return Object(a.jsxs)(Y.b,{size:"middle",children:[Object(a.jsx)(L,{url:"/orders/".concat(t.id),onSuccess:i,successMessage:"\u0417\u0430\u043a\u0430\u0437 \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d",errorMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),Object(a.jsx)(j.b,{to:"/orders/".concat(t.id,"/edit"),children:Object(a.jsx)(F.a,{type:"primary",ghost:!0,size:"small",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),Object(a.jsx)(j.b,{to:"/orders/".concat(t.id),children:Object(a.jsx)(F.a,{size:"small",children:"\u0414\u0435\u0442\u0430\u043b\u0438"})}),1===t.orderStatusId&&!t.userId&&Object(a.jsx)(F.a,{size:"small",type:"primary",onClick:function(){var e;e=t.id,W.put("/orders/".concat(e),{orderStatusId:2,userId:l.id}).then((function(){M.a.success({message:"\u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u0440\u0438\u043d\u044f\u0442 \u0432\u0430\u043c\u0438"}),u.push("/orders/".concat(e))})).catch((function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})}))},children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"})]})}}]);return Object(a.jsx)(J.a,{columns:m,dataSource:t,rowKey:"id",loading:c,pagination:!1})},Z=function(e){localStorage.setItem("ordersParams",JSON.stringify(e))},Q=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),c=t[0],r=t[1],s=Object(n.useState)([]),i=Object(b.a)(s,2),o=i[0],l=i[1],u=Object(n.useState)(function(){var e=localStorage.getItem("ordersParams");return e?JSON.parse(e):{page:1,size:10,filter:{},order:'[["createdAt", "DESC"]]'}}()),d=Object(b.a)(u,2),m=d[0],O=d[1],h=Object(n.useState)([]),x=Object(b.a)(h,2),f=x[0],p=x[1],g=Object(n.useState)(!1),y=Object(b.a)(g,2),I=y[0],S=y[1],N=Object(n.useState)([]),w=Object(b.a)(N,2),k=w[0],C=w[1],z=Object(n.useState)(!1),E=Object(b.a)(z,2),q=E[0],T=E[1],Y=function(e){Z(Object(v.a)(Object(v.a)({},m),e)),O((function(t){return Object(v.a)(Object(v.a)({},t),e)}))},J=function(e){Z(Object(v.a)(Object(v.a)({},m),{},{page:1,size:10,filter:Object(v.a)(Object(v.a)({},m.filter),e)})),O((function(t){return Object(v.a)(Object(v.a)({},t),{},{page:1,size:10,filter:Object(v.a)(Object(v.a)({},t.filter),e)})}))},V=Object(n.useCallback)((function(){r(!0),W.get("/orders",{params:m}).then((function(e){l(e.data)})).catch((function(){})).finally((function(){r(!1)}))}),[r,l,m]);return Object(n.useEffect)((function(){V()}),[V]),Object(n.useEffect)((function(){var e=setInterval((function(){V()}),5e3);return function(){clearInterval(e)}}),[V]),Object(n.useEffect)((function(){S(!0),W.get("/order_statuses").then((function(e){p(e.data)})).catch((function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441\u044b"})})).finally((function(){S(!1)})),T(!0),W.get("/users").then((function(e){C(e.data)})).catch((function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u044e\u0437\u0435\u0440\u043e\u0432"})})).finally((function(){T(!1)}))}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"table-controls",children:Object(a.jsx)(j.b,{to:"/orders/new",children:Object(a.jsx)(F.a,{className:"green-button",type:"primary",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})})}),Object(a.jsxs)("div",{className:"table-filters",children:["\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c:",Object(a.jsxs)(A.a,{style:{width:300},allowClear:!0,loading:q,value:m.order,onChange:function(e){return Y({order:e})},defaultValue:'[["createdAt", "DESC"]]',children:[Object(a.jsx)(A.a.Option,{value:'[["createdAt", "DESC"]]',children:"\u043f\u043e \u0434\u0430\u0442\u0435 (\u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u043e\u0432\u044b\u0435)"}),Object(a.jsx)(A.a.Option,{value:'[["createdAt", "ASC"]]',children:"\u043f\u043e \u0434\u0430\u0442\u0435 (\u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0440\u044b\u0435)"})]})," ",Object(a.jsx)(A.a,{placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441",style:{width:300},allowClear:!0,loading:I,value:m.filter.orderStatusId,onChange:function(e){return J({orderStatusId:e})},children:f.map((function(e){return Object(a.jsx)(A.a.Option,{value:e.id,children:e.name},e.id)}))})," ",Object(a.jsxs)(A.a,{placeholder:"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439",style:{width:300},allowClear:!0,value:m.filter.userId,loading:q,onChange:function(e){return J({userId:e})},children:[k.map((function(e){return Object(a.jsxs)(A.a.Option,{value:e.id,children:[e.fullName,", ",e.username]},e.id)})),Object(a.jsx)(A.a.Option,{value:null,children:"\u041d\u0438\u043a\u0442\u043e"})]})," ",Object(a.jsx)(F.a,{onClick:function(){Y({page:1,size:10,filter:{},order:'[["createdAt", "DESC"]]'})},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"})]}),Object(a.jsx)(G,{orders:o.data,loading:c,fetchOrders:V}),Object(a.jsx)("div",{className:"pagination",children:Object(a.jsx)(P.a,{showSizeChanger:!1,total:o.totalItems,current:m.page,defaultPageSize:m.size,onChange:function(e){Y({page:e})}})})]})},X=(c(1032),{admin:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440",manager:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"}),$=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),c=t[0],r=t[1],s=Object(n.useState)([]),i=Object(b.a)(s,2),o=i[0],l=i[1],d=Object(u.c)(w),m=Object(n.useCallback)((function(){r(!0),W.get("/users").then((function(e){l(e.data)})).catch((function(e){})).finally((function(){r(!1)}))}),[r,l]),O=Object(n.useMemo)((function(){return[{title:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",dataIndex:"username",key:"username"},{title:"\u0424\u0418\u041e",dataIndex:"fullName",key:"fullName"},{title:"Email",dataIndex:"email",key:"email"},{title:"\u0420\u043e\u043b\u044c",dataIndex:["role","name"],key:"role",render:function(e){return Object(a.jsx)(D.a,{color:"admin"===e?"geekblue":"green",children:X[e]})}},{title:"",key:"action",render:function(e,t){return Object(a.jsxs)(Y.b,{size:"middle",children:[Object(a.jsx)(j.b,{to:t.id===d.id?"/profile":"/users/".concat(t.id),children:Object(a.jsx)(F.a,{size:"small",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),t.id!==d.id&&Object(a.jsx)(L,{url:"/users/".concat(t.id),onSuccess:m,successMessage:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ".concat(t.username," \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d"),errorMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})}}]}),[d,m]);return Object(n.useEffect)((function(){m()}),[m]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"table-controls",children:Object(a.jsx)(j.b,{to:"/users/new",children:Object(a.jsx)(F.a,{className:"green-button",type:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})}),Object(a.jsx)(J.a,{columns:O,dataSource:o,rowKey:"id",loading:c,pagination:!1})]})},ee=c(1335),te=c(203),ce=c(1336),ae=c(1342),ne=A.a.Option,re={labelCol:{xs:{span:16},sm:{span:8}},wrapperCol:{xs:{span:16},sm:{span:8}}},se={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},ie=function(e){var t=e.user,c=void 0===t?{}:t,r=e.onSuccess,s=ee.a.useForm(),i=Object(b.a)(s,1)[0],o=C(),l=Object(b.a)(o,3)[2],j=Object(n.useState)(!1),u=Object(b.a)(j,2),d=u[0],m=u[1],O=Object(n.useState)(!1),h=Object(b.a)(O,2),x=h[0],f=h[1],p=!!c.id;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(ee.a,Object(v.a)(Object(v.a)({},re),{},{form:i,name:"user",onFinish:function(e){m(!0);var t={username:e.username,email:e.email,fullName:e.fullName};p&&x&&(t.password=e.password),e.roleId&&(t.roleId=Number(e.roleId)),(p?W.put("/users/".concat(c.id),t):W.post("/auth/signup",Object(v.a)(Object(v.a)({},t),{},{password:e.password}))).then((function(e){M.a.success({message:p?"\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ".concat(e.data.username," \u0431\u044b\u043b\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"):"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ".concat(e.data.username," \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e")}),r&&r(e.data)}),(function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})})).finally((function(){m(!1)}))},initialValues:p?Object(v.a)(Object(v.a)({},c),{},{roleId:String(c.role.id)}):{roleId:"2"},scrollToFirstError:!0,children:[Object(a.jsx)(ee.a.Item,{name:"username",label:Object(a.jsxs)("span",{children:["\u041b\u043e\u0433\u0438\u043d\xa0",Object(a.jsx)(te.a,{title:"\u041b\u043e\u0433\u0438\u043d \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0439 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430",children:Object(a.jsx)(ae.a,{})})]}),rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",whitespace:!0}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 E-mail"},{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 E-mail"}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:"fullName",label:"\u0424\u0418\u041e",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e",whitespace:!0}],children:Object(a.jsx)(ce.a,{})}),l&&Object(a.jsx)(ee.a.Item,{name:"roleId",label:"\u0420\u043e\u043b\u044c",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u044c!"}],children:Object(a.jsxs)(A.a,{children:[Object(a.jsx)(ne,{value:"1",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"}),Object(a.jsx)(ne,{value:"2",children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"})]})}),p&&Object(a.jsx)(ee.a.Item,Object(v.a)(Object(v.a)({},se),{},{children:Object(a.jsx)(F.a,{onClick:function(){f((function(e){return!e}))},children:x?"\u041e\u0442\u043c\u0435\u043d\u0430":"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})})),(!p||x)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ee.a.Item,{name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}],hasFeedback:!0,children:Object(a.jsx)(ce.a.Password,{autoComplete:"new-password"})}),Object(a.jsx)(ee.a.Item,{name:"confirm",label:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},function(e){var t=e.getFieldValue;return{validator:function(e,c){return c&&t("password")!==c?Promise.reject("\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c"):Promise.resolve()}}}],children:Object(a.jsx)(ce.a.Password,{})})]}),Object(a.jsx)(ee.a.Item,Object(v.a)(Object(v.a)({},se),{},{children:Object(a.jsx)(F.a,{type:"primary",htmlType:"submit",loading:d,children:p?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}))]}))})},oe=function(){var e=C(),t=Object(b.a)(e,2),c=t[0],n=t[1];return Object(a.jsx)(ie,{user:c,onSuccess:function(e){n(e)}})},le=c(666),je=(c(1041),function(e){return Object(a.jsx)("div",{className:"spinner",children:Object(a.jsx)(le.a,Object(v.a)({},e))})}),ue=function(){var e=Object(n.useState)(),t=Object(b.a)(e,2),c=t[0],r=t[1],s=Object(d.h)().id,i=Object(d.f)();return Object(n.useEffect)((function(){W.get("/users/".concat(s)).then((function(e){r(e.data)})).catch((function(e){console.log(e)}))}),[r,s]),c?Object(a.jsx)(ie,{user:c,onSuccess:function(){i.push("/users")}}):Object(a.jsx)(je,{size:"large"})},de=function(){var e=Object(d.f)();return Object(a.jsx)(ie,{onSuccess:function(){e.push("/users")}})},be=c(1329),me=c(1330),Oe=c(377),he=c(364),xe=c(1338),fe=c(1343),pe=c(1344),ge={labelCol:{xs:{span:16},sm:{span:8}},wrapperCol:{xs:{span:16},sm:{span:8}}},ye={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},ve=A.a.Option,Ie=function(e){var t=e.form,c=Object(n.useState)([]),r=Object(b.a)(c,2),s=r[0],i=r[1],o=Object(n.useState)(!1),l=Object(b.a)(o,2),j=l[0],u=l[1];return Object(n.useEffect)((function(){u(!0),W.get("/products").then((function(e){i(e.data)})).catch((function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u0432"})})).finally((function(){u(!1)}))}),[i,u]),Object(a.jsx)(ee.a.List,{name:"products",children:function(e,c){var n=c.add,r=c.remove;return Object(a.jsxs)(a.Fragment,{children:[e.map((function(e){return Object(a.jsxs)(be.a,{gutter:24,align:"middle",children:[Object(a.jsx)(me.a,{xs:16,children:Object(a.jsx)(ee.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){var c=(t.getFieldValue("products")||[]).filter((function(e){return e&&e.id})).map((function(e){return e.id}));return Object(a.jsx)(ee.a.Item,Object(v.a)(Object(v.a)({},e),{},{label:"\u0422\u043e\u0432\u0430\u0440",name:[e.name,"id"],fieldKey:[e.fieldKey,"id"],rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440"}],children:Object(a.jsx)(A.a,{disabled:j,children:s.map((function(e){return Object(a.jsx)(ve,{disabled:c.includes(e.id),value:e.id,children:e.name},e.id)}))})}))}})}),Object(a.jsx)(me.a,{xs:5,children:Object(a.jsx)(ee.a.Item,Object(v.a)(Object(v.a)({},e),{},{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",name:[e.name,"quantity"],fieldKey:[e.fieldKey,"quantity"],rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",type:"number",min:1}],children:Object(a.jsx)(xe.a,{})}))}),Object(a.jsx)(me.a,{xs:1,children:Object(a.jsx)(fe.a,{onClick:function(){return r(e.name)}})})]},e.key)})),e.length<s.length&&Object(a.jsx)(ee.a.Item,Object(v.a)(Object(v.a)({},ye),{},{children:Object(a.jsx)(F.a,{type:"dashed",onClick:function(){return n()},icon:Object(a.jsx)(pe.a,{}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"})}))]})}})},Se=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ee.a.Item,{name:["customer","email"],label:"Email",rules:[{type:"email",message:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 E-mail"},{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 E-mail",whitespace:!0}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:["customer","organizationName"],label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",whitespace:!0}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:["customer","address"],label:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441",whitespace:!0}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:["customer","bankAccountNumber"],label:Object(a.jsxs)("span",{children:["\u041d\u043e\u043c\u0435\u0440 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0451\u0442\u0430 (IBAN)\xa0",Object(a.jsx)(te.a,{title:"\u0414\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 28 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u044b\u0445 \u0431\u0443\u043a\u0432 \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u043e\u0433\u043e \u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0430 \u0438 \u0446\u0438\u0444\u0440",children:Object(a.jsx)(ae.a,{})})]}),normalize:function(e){return e.replace(/[^a-zA-Z0-9]/g,"").toUpperCase()},rules:[{required:!0,message:"\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c 28 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",whitespace:!0,len:28}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:["customer","bankName"],label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430",whitespace:!0}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:["customer","payerAccountNumber"],label:"\u0423\u041d\u041f",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u0423\u041d\u041f (9 \u0446\u0438\u0444\u0440)",whitespace:!0,len:9}],children:Object(a.jsx)(ce.a,{})})]})},Ne=function(e){var t=e.form,c=e.validatePhone;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ee.a.Item,{name:"deliveryMethodId",label:"\u0421\u043f\u043e\u0441\u043e\u0431 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u043f\u043e\u0441\u043e\u0431 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"}],children:Object(a.jsxs)(A.a,{children:[Object(a.jsx)(A.a.Option,{value:1,children:"\u0421\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437"}),Object(a.jsx)(A.a.Option,{value:2,children:"\u041a\u0443\u0440\u044c\u0435\u0440 (Autolight Express)"})]})}),Object(a.jsx)(ee.a.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return 1===t.getFieldValue("deliveryMethodId")?null:Object(a.jsx)(ee.a.Item,{name:"deliveryAddress",label:"\u0410\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441",whitespace:!0}],children:Object(a.jsx)(ce.a,{})})}}),Object(a.jsx)(ee.a.Item,{name:"contactNumber",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440",rules:[Object(v.a)({required:!0,message:"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 9 \u0446\u0438\u0444\u0440"},c?{len:9}:{})],children:Object(a.jsx)(ce.a,{addonBefore:"+375",style:{width:"100%"}})}),Object(a.jsx)(ee.a.Item,{name:"contactName",label:"\u0418\u043c\u044f",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043c\u044f"}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return 1===t.getFieldValue("deliveryMethodId")?null:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ee.a.Item,{name:"contactSurname",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e",whitespace:!0}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:"contactPatronymic",label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",whitespace:!0}],children:Object(a.jsx)(ce.a,{})})]})}})]})},we=A.a.Option,ke={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},Ce=function(e){var t=e.order,c=void 0===t?{}:t,r=e.onSuccess,s=ee.a.useForm(),i=Object(b.a)(s,1)[0],o=Object(n.useState)({data:[]}),l=Object(b.a)(o,2),u=l[0],d=l[1],m=Object(n.useState)(!1),O=Object(b.a)(m,2),h=O[0],x=O[1],f=Object(n.useState)([]),p=Object(b.a)(f,2),g=p[0],y=p[1],I=Object(n.useState)(!1),S=Object(b.a)(I,2),N=S[0],w=S[1],k=Object(n.useState)([]),z=Object(b.a)(k,2),E=z[0],q=z[1],P=Object(n.useState)(!1),T=Object(b.a)(P,2),Y=T[0],J=T[1],V=Object(n.useState)(!1),B=Object(b.a)(V,2),D=B[0],K=B[1],_=Object(n.useState)(1),H=Object(b.a)(_,2),U=H[0],R=H[1],L=!!c.id,G=C(),Z=Object(b.a)(G,1)[0],Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";x(!0),W.get("/customers",{params:{page:1,size:10,search:e}}).then((function(e){d(e.data)})).catch((function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u0432"})})).finally((function(){x(!1)}))};Object(n.useEffect)((function(){L&&i.resetFields()}),[i,L,c]),Object(n.useEffect)((function(){Q(),w(!0),W.get("/order_statuses").then((function(e){y(e.data)})).catch((function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441\u044b"})})).finally((function(){w(!1)})),J(!0),W.get("/users").then((function(e){q(e.data)})).catch((function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u044e\u0437\u0435\u0440\u043e\u0432"})})).finally((function(){J(!1)}))}),[d,x]);var X=(c.products||[]).map((function(e){return{id:e.id,quantity:e.order_product.quantity}}));return Object(a.jsxs)(a.Fragment,{children:[L&&Object(a.jsx)("div",{className:"table-controls",children:Object(a.jsx)(j.b,{to:"/orders/".concat(c.id),children:Object(a.jsx)(F.a,{type:"primary",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"})})}),Object(a.jsxs)(ee.a,{layout:"vertical",form:i,name:"order",onFinish:function(e){var t=[];if(L){var a=e.products.map((function(e){return e.id})),n=X.reduce((function(e,t){return a.includes(t.id)||e.push(Object(v.a)(Object(v.a)({},t),{},{_destroy:!0})),e}),[]);e.products=e.products.concat(n)}L||e.products&&e.products.length||t.push("\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b \u0442\u043e\u0432\u0430\u0440\u044b"),t.length?M.a.error({message:t.join(". ")}):(K(!0),(L?W.put("/orders/".concat(c.id),e):W.post("/orders",e)).then((function(e){M.a.success({message:L?"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b":"\u0417\u0430\u043a\u0430\u0437 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"}),r&&r(e.data)}),(function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"})})).finally((function(){K(!1)})))},initialValues:L?{deliveryMethodId:c.deliveryMethodId,deliveryAddress:c.deliveryAddress,contactNumber:c.contactNumber,contactName:c.contactName,contactSurname:c.contactSurname,contactPatronymic:c.contactPatronymic,notes:c.notes,orderStatusId:c.orderStatusId,userId:c.userId,invoice:c.invoice,products:X}:{deliveryMethodId:1,orderStatusId:1,products:[{id:null,quantity:1}]},scrollToFirstError:!0,style:{maxWidth:750,margin:"0 auto"},children:[Object(a.jsx)(Ie,{form:i}),Object(a.jsxs)("div",{style:{marginBottom:"50px"},children:[Object(a.jsx)(Ne,{form:i}),Object(a.jsx)(ee.a.Item,{name:"invoice",label:"\u0421\u0447\u0451\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430",children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:"notes",label:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0438 \u043f\u043e\u0436\u0435\u043b\u0430\u043d\u0438\u044f",children:Object(a.jsx)(ce.a.TextArea,{})}),Object(a.jsx)(ee.a.Item,{name:"orderStatusId",label:"\u0421\u0442\u0430\u0442\u0443\u0441",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441"}],children:Object(a.jsx)(A.a,{loading:N,children:g.map((function(e){return Object(a.jsx)(we,{value:e.id,children:e.name},e.id)}))})}),Object(a.jsx)(ee.a.Item,{shouldUpdate:!0,label:"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439",children:function(){return Object(a.jsxs)(be.a,{gutter:24,children:[Object(a.jsx)(me.a,{span:18,children:Object(a.jsx)(ee.a.Item,{name:"userId",noStyle:!0,children:Object(a.jsx)(A.a,{loading:Y,children:E.map((function(e){return Object(a.jsx)(we,{value:e.id,children:"".concat(e.fullName||""," ").concat(e.email,", ").concat(e.username)},e.id)}))})})}),i.getFieldValue("userId")===Z.id?null:Object(a.jsx)(me.a,{span:6,children:Object(a.jsx)(F.a,{type:"primary",onClick:function(){i.setFieldsValue({userId:Z.id})},children:"\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u043c\u0435\u043d\u044f"})})]})}})]}),L?null:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ee.a.Item,{label:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a",children:Object(a.jsxs)(Oe.a.Group,{onChange:function(e){R(e.target.value)},value:U,children:[Object(a.jsx)(Oe.a,{value:1,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430"}),Object(a.jsx)(Oe.a,{value:2,children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e"})]})}),1===U?Object(a.jsx)(Se,{}):Object(a.jsx)(ee.a.Item,{name:"customerId",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430"}],children:Object(a.jsx)(A.a,{showSearch:!0,loading:h,notFoundContent:h?Object(a.jsx)(le.a,{size:"small"}):null,placeholder:"\u041f\u043e\u0438\u0441\u043a",onSearch:Object(he.a)(500,Q),filterOption:!1,children:u.data.map((function(e){return Object(a.jsx)(we,{value:e.id,children:"".concat(e.organizationName,", ").concat(e.address,", ").concat(e.email)},e.id)}))})})]}),Object(a.jsx)(ee.a.Item,Object(v.a)(Object(v.a)({},ke),{},{children:Object(a.jsx)(F.a,{type:"primary",htmlType:"submit",loading:D,children:L?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}))]})]})},Fe=function(){var e=Object(d.f)();return Object(a.jsx)(Ce,{onSuccess:function(t){var c=t.id;e.push("/orders/".concat(c))}})},ze=function(){var e=Object(n.useState)(),t=Object(b.a)(e,2),c=t[0],r=t[1],s=Object(d.h)().id,i=Object(d.f)(),o=function(){W.get("/orders/".concat(s)).then((function(e){c&&JSON.stringify(c)!==JSON.stringify(e.data)&&(M.a.warning({message:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u042d\u0442\u043e\u0442 \u0437\u0430\u043a\u0430\u0437 \u0431\u044b\u043b \u0438\u0437\u043c\u0435\u043d\u0451\u043d \u0434\u0440\u0443\u0433\u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445.",duration:0}),r(e.data)),c||r(e.data)})).catch((function(e){console.log(e)}))};return Object(n.useEffect)((function(){o()}),[s]),Object(n.useEffect)((function(){var e=setInterval((function(){o()}),5e3);return function(){clearInterval(e)}}),[s,c]),c?Object(a.jsx)(Ce,{order:c,onSuccess:function(e){var t=e.id;i.push("/orders/".concat(t))}}):Object(a.jsx)(je,{size:"large"})},Ee=c(1337),qe=function(){var e=Object(n.useState)(),t=Object(b.a)(e,2),c=t[0],r=t[1],s=Object(d.h)().id,i=function(){W.get("/orders/".concat(s)).then((function(e){c&&JSON.stringify(c)!==JSON.stringify(e.data)&&(M.a.warning({message:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u042d\u0442\u043e\u0442 \u0437\u0430\u043a\u0430\u0437 \u0431\u044b\u043b \u0438\u0437\u043c\u0435\u043d\u0451\u043d \u0434\u0440\u0443\u0433\u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445.",duration:0}),r(e.data)),c||r(e.data)})).catch((function(e){console.log(e)}))};return Object(n.useEffect)((function(){i()}),[s]),Object(n.useEffect)((function(){var e=setInterval((function(){i()}),5e3);return function(){clearInterval(e)}}),[s,c]),c?Object(a.jsxs)(Ee.a,{bordered:!0,title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0435",extra:Object(a.jsx)(j.b,{to:"/orders/".concat(s,"/edit"),children:Object(a.jsx)(F.a,{type:"primary",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),children:[Object(a.jsx)(Ee.a.Item,{label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u0430",children:(c.products||[]).map((function(e){return Object(a.jsxs)(n.Fragment,{children:[e.name," (",e.order_product.quantity," \u0448\u0442)",Object(a.jsx)("br",{})]},e.id)}))}),Object(a.jsx)(Ee.a.Item,{label:"\u0421\u043e\u0437\u0434\u0430\u043d",children:B()(c.createdAt).format("D MMMM YYYY, HH:mm")}),Object(a.jsxs)(Ee.a.Item,{label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e",children:[c.contactSurname," ",c.contactName," ",c.contactPatronymic," ","+375".concat(c.contactNumber)]}),Object(a.jsx)(Ee.a.Item,{label:"\u0421\u043f\u043e\u0441\u043e\u0431 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",children:c.deliveryMethod.name}),c.deliveryAddress&&Object(a.jsx)(Ee.a.Item,{label:"\u0410\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",children:c.deliveryAddress}),c.notes&&Object(a.jsx)(Ee.a.Item,{label:"\u0414\u043e\u043f. \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",children:c.notes}),Object(a.jsx)(Ee.a.Item,{label:"\u0421\u0442\u0430\u0442\u0443\u0441",children:Object(a.jsx)(_,Object(v.a)({},c.orderStatus))}),Object(a.jsx)(Ee.a.Item,{label:"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439",children:c.user?Object(a.jsxs)(a.Fragment,{children:[c.user.fullName&&Object(a.jsxs)(a.Fragment,{children:[c.user.fullName,Object(a.jsx)("br",{})]}),c.user.username,Object(a.jsx)("br",{}),c.user.email,Object(a.jsx)("br",{})]}):"\u041d\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d"}),Object(a.jsx)(Ee.a.Item,{label:"\u0421\u0447\u0451\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430",children:c.invoice}),Object(a.jsx)(Ee.a.Item,{label:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a",children:Object(a.jsxs)(j.b,{to:"/customers/".concat(c.customer.id),children:[c.customer.organizationName,Object(a.jsx)("br",{}),c.customer.email,Object(a.jsx)("br",{}),c.customer.address,Object(a.jsx)("br",{}),c.customer.bankName," (",c.customer.bankAccountNumber,")",Object(a.jsx)("br",{}),"\u0423\u041d\u041f: ",c.customer.payerAccountNumber]})}),Object(a.jsx)(Ee.a.Item,{label:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",children:c.orderStatusHistories.map((function(e){return Object(a.jsxs)(n.Fragment,{children:[Object(a.jsxs)("b",{children:[e.statusName,":"]})," ",B()(e.createdAt).format("D MMMM YYYY, HH:mm"),Object(a.jsx)("br",{})]},e.id)}))})]}):Object(a.jsx)(je,{size:"large"})},Me=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),c=t[0],r=t[1],s=Object(n.useState)([]),i=Object(b.a)(s,2),o=i[0],l=i[1],u=Object(n.useState)({page:1,size:10}),d=Object(b.a)(u,2),m=d[0],O=d[1],h=function(e){O((function(t){return Object(v.a)(Object(v.a)({},t),e)}))},x=Object(n.useCallback)((function(){r(!0),W.get("/customers",{params:m}).then((function(e){l(e.data)})).catch((function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u0432"})})).finally((function(){r(!1)}))}),[r,l,m]),f=Object(n.useMemo)((function(){return[{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",dataIndex:"organizationName"},{title:"Email",dataIndex:"email"},{title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432",dataIndex:["orders","length"]},{title:"",key:"action",render:function(e,t){return Object(a.jsxs)(Y.b,{size:"middle",children:[Object(a.jsx)(L,{url:"/customers/".concat(t.id),onSuccess:x,successMessage:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d",errorMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430"}),Object(a.jsx)(j.b,{to:"/customers/".concat(t.id,"/edit"),children:Object(a.jsx)(F.a,{size:"small",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),Object(a.jsx)(j.b,{to:"/customers/".concat(t.id),children:Object(a.jsx)(F.a,{size:"small",children:"\u0414\u0435\u0442\u0430\u043b\u0438"})})]})}}]}),[x]);Object(n.useEffect)((function(){x()}),[x]);var p=Object(he.a)(500,(function(e){h({search:e.target.value,page:1,size:10})}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"table-controls",children:Object(a.jsx)(j.b,{to:"/customers/new",children:Object(a.jsx)(F.a,{className:"green-button",type:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})}),Object(a.jsx)("div",{className:"table-filters",children:Object(a.jsx)(ce.a,{style:{width:300},onChange:p,placeholder:"\u041f\u043e\u0438\u0441\u043a"})}),Object(a.jsx)(J.a,{columns:f,dataSource:o.data,rowKey:"id",loading:c,pagination:!1}),Object(a.jsx)("div",{className:"pagination",children:Object(a.jsx)(P.a,{showSizeChanger:!1,total:o.totalItems,current:m.page,defaultPageSize:m.size,onChange:function(e){h({page:e})}})})]})},Ae=function(){var e=Object(n.useState)(),t=Object(b.a)(e,2),c=t[0],r=t[1],s=Object(d.h)().id,i=Object(n.useCallback)((function(){W.get("/customers/".concat(s)).then((function(e){r(e.data)})).catch((function(e){console.log(e)}))}),[s,r]);return Object(n.useEffect)((function(){i()}),[i]),c?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{style:{marginBottom:40},children:Object(a.jsxs)(Ee.a,{bordered:!0,title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0435",extra:Object(a.jsx)(j.b,{to:"/customers/".concat(s,"/edit"),children:Object(a.jsx)(F.a,{type:"primary",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),children:[Object(a.jsx)(Ee.a.Item,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",children:c.organizationName}),Object(a.jsx)(Ee.a.Item,{label:"Email",children:c.email}),Object(a.jsx)(Ee.a.Item,{label:"\u0410\u0434\u0440\u0435\u0441",children:c.address}),Object(a.jsx)(Ee.a.Item,{label:"\u041d\u043e\u0431\u0435\u0440 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0451\u0442\u0430",children:c.bankAccountNumber}),Object(a.jsx)(Ee.a.Item,{label:"\u0411\u0430\u043d\u043a",children:c.bankName}),Object(a.jsx)(Ee.a.Item,{label:"\u0423\u041d\u041f",children:c.payerAccountNumber})]})}),Object(a.jsx)("h2",{children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),Object(a.jsx)(G,{orders:c.orders,showCustomer:!1,loading:!1,fetchOrders:i})]}):Object(a.jsx)(je,{size:"large"})},Pe={labelCol:{xs:{span:16},sm:{span:8}},wrapperCol:{xs:{span:16},sm:{span:8}}},Te={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},Ye=function(e){var t=e.customer,c=void 0===t?{}:t,r=e.onSuccess,s=ee.a.useForm(),i=Object(b.a)(s,1)[0],o=Object(n.useState)(!1),l=Object(b.a)(o,2),j=l[0],u=l[1],d=!!c.id;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(ee.a,Object(v.a)(Object(v.a)({},Pe),{},{form:i,name:"customer",onFinish:function(e){u(!0),(d?W.put("/customers/".concat(c.id),e):W.post("/customers",e)).then((function(e){M.a.success({message:d?"\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430 ".concat(e.data.organizationName," \u0431\u044b\u043b\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"):"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430 ".concat(e.data.organizationName," \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e")}),r&&r(e.data)}),(function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430"})})).finally((function(){u(!1)}))},initialValues:d?{email:c.email,organizationName:c.organizationName,address:c.address,bankAccountNumber:c.bankAccountNumber,bankName:c.bankName,payerAccountNumber:c.payerAccountNumber}:{},scrollToFirstError:!0,children:[Object(a.jsx)(ee.a.Item,{name:"email",label:"Email",rules:[{type:"email",message:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 E-mail"},{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 E-mail",whitespace:!0}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:"organizationName",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",whitespace:!0}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:"address",label:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441",whitespace:!0}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:"bankAccountNumber",label:"\u041d\u043e\u043c\u0435\u0440 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0451\u0442\u0430",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0451\u0442\u0430",whitespace:!0}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:"bankName",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430",whitespace:!0}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:"payerAccountNumber",label:"\u0423\u041d\u041f",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u0423\u041d\u041f (9 \u0446\u0438\u0444\u0440)"}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,Object(v.a)(Object(v.a)({},Te),{},{children:Object(a.jsx)(F.a,{type:"primary",htmlType:"submit",loading:j,children:d?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}))]}))})},Je=function(){var e=Object(n.useState)(),t=Object(b.a)(e,2),c=t[0],r=t[1],s=Object(d.h)().id,i=Object(d.f)();return Object(n.useEffect)((function(){W.get("/customers/".concat(s)).then((function(e){r(e.data)})).catch((function(e){console.log(e)}))}),[s]),c?Object(a.jsx)(Ye,{customer:c,onSuccess:function(e){var t=e.id;i.push("/customers/".concat(t))}}):Object(a.jsx)(je,{size:"large"})},Ve=function(){var e=Object(d.f)();return Object(a.jsx)(Ye,{onSuccess:function(t){var c=t.id;e.push("/customers/".concat(c))}})},Be=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),c=t[0],r=t[1],s=Object(n.useState)([]),i=Object(b.a)(s,2),o=i[0],l=i[1],u=Object(n.useCallback)((function(){r(!0),W.get("/products").then((function(e){l(e.data)})).catch((function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"})})).finally((function(){r(!1)}))}),[r,l]),d=Object(n.useMemo)((function(){return[{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",dataIndex:"name"},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",dataIndex:"description"},{title:"",key:"action",render:function(e,t){return Object(a.jsxs)(Y.b,{size:"middle",children:[Object(a.jsx)(L,{url:"/products/".concat(t.id),onSuccess:u,successMessage:"\u0422\u043e\u0432\u0430\u0440 \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d",errorMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"}),Object(a.jsx)(j.b,{to:"/products/".concat(t.id,"/edit"),children:Object(a.jsx)(F.a,{size:"small",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]})}}]}),[u]);return Object(n.useEffect)((function(){u()}),[u]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"table-controls",children:Object(a.jsx)(j.b,{to:"/products/new",children:Object(a.jsx)(F.a,{className:"green-button",type:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})}),Object(a.jsx)(J.a,{columns:d,dataSource:o,rowKey:"id",loading:c,pagination:!1})]})},De=function(e){var t=e.product,c=void 0===t?{}:t,r=e.onSuccess,s=ee.a.useForm(),i=Object(b.a)(s,1)[0],o=Object(n.useState)(!1),l=Object(b.a)(o,2),j=l[0],u=l[1],d=!!c.id;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(ee.a,Object(v.a)(Object(v.a)({},ge),{},{form:i,name:"product",onFinish:function(e){u(!0),(d?W.put("/products/".concat(c.id),e):W.post("/products",e)).then((function(e){M.a.success({message:d?"\u0414\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 ".concat(e.data.name," \u0431\u044b\u043b\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"):"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 ".concat(e.data.name," \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e")}),r&&r(e.data)}),(function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u0430"})})).finally((function(){u(!1)}))},initialValues:d?{name:c.name,description:c.description}:{},scrollToFirstError:!0,children:[Object(a.jsx)(ee.a.Item,{name:"name",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",whitespace:!0}],children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(ee.a.Item,{name:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",children:Object(a.jsx)(ce.a.TextArea,{})}),Object(a.jsx)(ee.a.Item,Object(v.a)(Object(v.a)({},ye),{},{children:Object(a.jsx)(F.a,{type:"primary",htmlType:"submit",loading:j,children:d?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}))]}))})},Ke=function(){var e=Object(d.f)();return Object(a.jsx)(De,{onSuccess:function(){e.push("/products")}})},_e=function(){var e=Object(n.useState)(),t=Object(b.a)(e,2),c=t[0],r=t[1],s=Object(d.h)().id,i=Object(d.f)();return Object(n.useEffect)((function(){W.get("/products/".concat(s)).then((function(e){r(e.data)})).catch((function(e){console.log(e)}))}),[s]),c?Object(a.jsx)(De,{product:c,onSuccess:function(){i.push("/products")}}):Object(a.jsx)(je,{size:"large"})},He=c(1334),Ue=c(685),Re=c(1332),We=function(){var e=Object(n.useState)({data:[]}),t=Object(b.a)(e,2),c=t[0],r=t[1],s=Object(n.useState)(),i=Object(b.a)(s,2),o=i[0],l=i[1],j=Object(n.useState)({page:1,size:1e4,createdAt:null}),u=Object(b.a)(j,2),d=u[0],m=u[1],O=Object(Re.a)(c.data.reduce((function(e,t){return e.concat(t.products)}),[]),"name"),h=Object.keys(O).map((function(e){return{type:e,value:O[e].reduce((function(e,t){return e+t.order_product.quantity}),0)}})),x=h.reduce((function(e,t){return e+t.value}),0),f={appendPadding:10,data:h,angleField:"value",colorField:"type",radius:1,innerRadius:.6,label:{autoRotate:!1,type:"inner",offset:"-50%",content:"{value}",style:{textAlign:"center",fontSize:17}},statistic:{title:!1,content:{style:{whiteSpace:"pre-wrap",overflow:"hidden",textOverflow:"ellipsis"},formatter:function(){return"\u0412\u0441\u0435\u0433\u043e ".concat(x)}}}};return Object(n.useEffect)((function(){l(!0),W.get("/orders",{params:d}).then((function(e){r(e.data)})).catch((function(){})).finally((function(){l(!1)}))}),[d]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(He.a.RangePicker,{style:{marginBottom:"50px",width:300},onChange:function(e,t){!function(e){m((function(t){return Object(v.a)(Object(v.a)({},t),e)}))}({createdAt:JSON.stringify(t)})}}),Object(a.jsxs)(Ee.a,{title:d.createdAt?"\u0417\u0430 \u043f\u0435\u0440\u0438\u043e\u0434 ".concat(JSON.parse(d.createdAt).map((function(e){return B()(e).format("D MMMM YYYY")})).join(" - ")):"\u0417\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043c\u044f",bordered:!0,layout:"vertical",style:{marginBottom:50},children:[h.map((function(e){return Object(a.jsx)(Ee.a.Item,{label:e.type,children:e.value},e.type)})),Object(a.jsx)(Ee.a.Item,{label:"\u0412\u0441\u0435\u0433\u043e",children:x})]}),Object(a.jsx)(Ue.a,Object(v.a)(Object(v.a)({},f),{},{loading:o}))]})},Le=m.a.Content,Ge=m.a.Sider,Ze=[{path:"/",component:Object(a.jsx)(Q,{})},{path:"/orders/new",component:Object(a.jsx)(Fe,{})},{path:"/orders/:id/edit",component:Object(a.jsx)(ze,{})},{path:"/orders/:id",component:Object(a.jsx)(qe,{})},{path:"/users",component:Object(a.jsx)($,{})},{path:"/users/new",component:Object(a.jsx)(de,{})},{path:"/users/:id",component:Object(a.jsx)(ue,{})},{path:"/customers",component:Object(a.jsx)(Me,{})},{path:"/customers/new",component:Object(a.jsx)(Ve,{})},{path:"/customers/:id",component:Object(a.jsx)(Ae,{})},{path:"/customers/:id/edit",component:Object(a.jsx)(Je,{})},{path:"/products",component:Object(a.jsx)(Be,{})},{path:"/products/new",component:Object(a.jsx)(Ke,{})},{path:"/products/:id/edit",component:Object(a.jsx)(_e,{})},{path:"/profile",component:Object(a.jsx)(oe,{})},{path:"/statistics",component:Object(a.jsx)(We,{})}],Qe=function(){var e=C(),t=Object(b.a)(e,3)[2],c=Object(d.g)(),r=Object(n.useMemo)((function(){return c.pathname.match("/users")?"users":c.pathname.match("/customers")?"customers":c.pathname.match("/products")?"products":c.pathname.match("/profile")?"profile":c.pathname.match("/statistics")?"statistics":"orders"}),[c.pathname]);return Object(a.jsxs)(m.a,{children:[Object(a.jsxs)(Ge,{breakpoint:"lg",collapsedWidth:"0",children:[Object(a.jsx)("div",{className:"logo",children:"Axiom Admin"}),Object(a.jsxs)(O.a,{theme:"dark",mode:"inline",selectedKeys:[r],children:[Object(a.jsx)(O.a.Item,{icon:Object(a.jsx)(h.a,{}),children:Object(a.jsx)(j.b,{to:"/",children:"\u0417\u0430\u043a\u0430\u0437\u044b"})},"orders"),t&&Object(a.jsx)(O.a.Item,{icon:Object(a.jsx)(x.a,{}),children:Object(a.jsx)(j.b,{to:"/users",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})},"users"),Object(a.jsx)(O.a.Item,{icon:Object(a.jsx)(f.a,{}),children:Object(a.jsx)(j.b,{to:"/customers",children:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0438"})},"customers"),Object(a.jsx)(O.a.Item,{icon:Object(a.jsx)(p.a,{}),children:Object(a.jsx)(j.b,{to:"/products",children:"\u0422\u043e\u0432\u0430\u0440\u044b"})},"products"),Object(a.jsx)(O.a.Item,{icon:Object(a.jsx)(g.a,{}),children:Object(a.jsx)(j.b,{to:"/profile",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})},"profile"),t&&Object(a.jsx)(O.a.Item,{icon:Object(a.jsx)(y.a,{}),children:Object(a.jsx)(j.b,{to:"/statistics",children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"})},"statistics")]})]}),Object(a.jsxs)(m.a,{children:[Object(a.jsx)(q,{}),Object(a.jsx)(Le,{style:{margin:"24px 16px 0"},children:Object(a.jsx)("div",{className:"site-layout-background",style:{padding:24},children:t?Object(a.jsx)(d.c,{children:Ze.map((function(e){return Object(a.jsx)(d.a,{exact:!0,path:e.path,children:e.component},e.path)}))}):Object(a.jsx)(d.c,{children:Ze.filter((function(e){return!e.path.match("/users")||!e.path.match("/statistics")})).map((function(e){return Object(a.jsx)(d.a,{exact:!0,path:e.path,children:e.component},e.path)}))})})})]})]})},Xe=(c(1312),c(1351)),$e=(c(1313),function(){var e=C(),t=Object(b.a)(e,2)[1],c=Object(n.useState)(!1),r=Object(b.a)(c,2),s=r[0],i=r[1];return Object(a.jsx)("div",{className:"login-form-wrapper",children:Object(a.jsx)("div",{className:"login-form-container",children:Object(a.jsxs)(ee.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(e){i(!0),W.post("/auth/signin",{username:e.username,password:e.password}).then((function(e){e.data.accessToken&&localStorage.setItem("token",e.data.accessToken),t(e.data)})).catch((function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432\u0445\u043e\u0434"})})).finally((function(){i(!1)}))},children:[Object(a.jsx)(ee.a.Item,{name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"}],children:Object(a.jsx)(ce.a,{prefix:Object(a.jsx)(g.a,{className:"site-form-item-icon"}),placeholder:"\u041b\u043e\u0433\u0438\u043d"})}),Object(a.jsx)(ee.a.Item,{name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}],children:Object(a.jsx)(ce.a.Password,{prefix:Object(a.jsx)(Xe.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(a.jsx)(ee.a.Item,{children:Object(a.jsx)(F.a,{loading:s,type:"primary",htmlType:"submit",className:"login-form-button",children:"\u0412\u043e\u0439\u0442\u0438"})})]})})})}),et=(c(1314),{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:10}}}),tt=function(){var e=ee.a.useForm(),t=Object(b.a)(e,1)[0],c=Object(n.useState)(!1),r=Object(b.a)(c,2),s=r[0],i=r[1],o=Object(n.useState)(!1),l=Object(b.a)(o,2),j=l[0],u=l[1];return j?Object(a.jsxs)("div",{style:{maxWidth:750,margin:"50px auto 30px auto"},children:[Object(a.jsx)("h1",{children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d!"}),Object(a.jsx)("h3",{children:"\u041c\u044b \u0441\u0432\u044f\u0436\u0435\u043c\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u043f\u043e \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438. \u041f\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u043d\u043e\u0433\u043e \u0441\u043f\u0440\u043e\u0441\u0430, \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u0441 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0435\u0439 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u043f\u043e \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0443 \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0438\u043e\u043c\u0435\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e \u0440\u0435\u0430\u0433\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430 \u0432\u0441\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043d\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u043c. \u041f\u0440\u0438\u043d\u043e\u0441\u0438\u043c \u0438\u0437\u0432\u0438\u043d\u0435\u043d\u0438\u044f \u0437\u0430 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0438."})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{style:{maxWidth:750,margin:"50px auto 30px auto"},children:Object(a.jsxs)("h3",{children:["\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u044e\u0449\u0438\u0435 \u0432\u0430\u0441 \u0442\u043e\u0432\u0430\u0440\u044b, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u0445 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f \u043f\u043e\u043c\u0435\u0447\u0435\u043d\u043d\u044b\u0435 * \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 ",Object(a.jsx)("b",{children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})}),Object(a.jsxs)(ee.a,{layout:"vertical",form:t,name:"order",onFinish:function(e){var t=[];e.products&&e.products.length||t.push("\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b \u0442\u043e\u0432\u0430\u0440\u044b"),t.length?M.a.error({message:t.join(". ")}):(i(!0),W.post("/orders",e).then((function(){M.a.success({message:"\u0417\u0430\u043a\u0430\u0437 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d"}),u(!0)}),(function(){M.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})).finally((function(){i(!1)})))},initialValues:{deliveryMethodId:1,orderStatusId:1,products:[{id:null,quantity:1}]},scrollToFirstError:!0,style:{maxWidth:750,margin:"0 auto",paddingBottom:30},children:[Object(a.jsx)(Ie,{form:t}),Object(a.jsx)(Ne,{form:t,validatePhone:!0}),Object(a.jsx)(Se,{}),Object(a.jsx)(ee.a.Item,{name:"notes",label:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0438 \u043f\u043e\u0436\u0435\u043b\u0430\u043d\u0438\u044f",children:Object(a.jsx)(ce.a.TextArea,{})}),Object(a.jsx)(ee.a.Item,Object(v.a)(Object(v.a)({},et),{},{children:Object(a.jsx)(F.a,{type:"primary",htmlType:"submit",size:"large",loading:s,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})}))]})]})};B.a.locale("ru");var ct=function(){var e=Object(u.b)(),t=Object(u.c)(w);return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t&&e(N(t))}),[e]),t?Object(a.jsx)(Qe,{}):Object(a.jsxs)(d.c,{children:[Object(a.jsx)(d.a,{exact:!0,path:"/",children:Object(a.jsx)($e,{})}),Object(a.jsx)(d.a,{exact:!0,path:"/order_form",children:Object(a.jsx)(tt,{})})]})},at=Object(I.a)({reducer:{auth:k}}),nt=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,1352)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),r(e),s(e)}))};c(1315);l.a.render(Object(a.jsx)(u.a,{store:at,children:Object(a.jsx)(r.a,{locale:i.a,children:Object(a.jsx)(j.a,{children:Object(a.jsx)(ct,{})})})}),document.getElementById("root")),nt()}},[[1321,1,2]]]);
//# sourceMappingURL=main.7c780eb0.chunk.js.map